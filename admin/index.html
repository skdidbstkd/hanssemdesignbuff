<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <title>DesignBuff CMS Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body{font-family:system-ui,-apple-system,'Noto Sans KR',sans-serif;margin:0}
      .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center}
      .hint{color:#666;font-size:14px;margin-top:12px;text-align:center}
    </style>
  </head>
  <body>
    <div class="wrap">
      <div>
        <div style="text-align:center">관리자 화면 불러오는 중…</div>
        <div class="hint">새로고침이 필요하면 <b>Ctrl/⌘+Shift+R</b></div>
      </div>
    </div>

    <!-- 1) Decap CMS 스크립트: 우리가 업로드한 로컬 파일 사용 -->
    <!-- 상대경로 사용 → GitHub Pages(하위 경로)와 일반 도메인 모두 대응 -->
    <script defer src="./decap-cms.js"></script>

    <!-- 2) CMS 초기화 (충돌 코드 제거, removeChild 등 DOM 조작 없음) -->
    <script>
      (function init() {
        // GitHub Pages(하위경로)와 일반 루트 모두 대응되는 config 경로 계산
        var hasSubdir = location.pathname.indexOf('/hanssemdesignbuff/') !== -1;
        var configPath = hasSubdir
          ? '/hanssemdesignbuff/admin/config.yml'
          : '/admin/config.yml';

        function boot() {
          if (!window.CMS) { setTimeout(boot, 100); return; }
          window.CMS.init({ config: configPath });
        }
        // 스크립트가 defer라 load 시점에는 거의 준비됨
        window.addEventListener('load', boot);
      })();
    </script>
  </body>
</html>
